# apiVersion: argoproj.io/v1alpha1
# kind: ApplicationSet
# metadata:
#   name: priyankapractice
#   namespace: argocd
# spec:
#   generators:
#     # merge 'parent' generator
#     - merge:
#         mergeKeys:
#           - server
#         generators:
#           - clusters:
#               values:
#                 kafka: 'true'
#                 redis: 'false'
#           # For clusters with a specific label, enable Kafka.
#           - clusters:
#               selector:
#                 matchLabels:
#                   use-kafka: 'false'
#               values:
#                 kafka: 'false'
#           # For a specific cluster, enable Redis.
#           - list:
#               elements: 
#                 - server: https://2.4.6.8
#                   values.redis: 'true'
#   generators:
#   - list:
#       elements:
#       - cluster: cluster1
#         url: https://kubernetes.default.svc
#         env: dev
#   template:
#     metadata:
#       name: 'priyankapractice-{{env}}'
#     spec:
#       project: default
#       syncPolicy:
#         automated:
#           prune: true
#           selfHeal: true
#       source:
#         repoURL: https://github.com/sarsatis/helm-charts.git
#         targetRevision: clustergenerator
#         path: charts/helm-charts
#         helm:
#           valueFiles:
#             - "/manifests/priyankapractice/values-{{env}}.yaml"
#       destination:
#         server: '{{url}}'
#         namespace: argocd